{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/HP/Documents/GitHub/Qr-Code-Reader/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/HP/Documents/GitHub/Qr-Code-Reader/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Users/HP/Documents/GitHub/Qr-Code-Reader/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GitHub\\\\Qr-Code-Reader\\\\src\\\\App.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport \"./styles.css\";\nimport { useState } from \"react\";\nimport QrReader from \"react-qr-reader\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar App = function App() {\n  _s();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    code = _useState2[0],\n    setCode = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    showDialog = _useState4[0],\n    setDiaglog = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    processing = _useState6[0],\n    setProcessing = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    precScan = _useState8[0],\n    setPrecScan = _useState8[1];\n  var _useState9 = useState(\"environment\"),\n    _useState10 = _slicedToArray(_useState9, 2),\n    selected = _useState10[0],\n    setSelected = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    errorMessage = _useState12[0],\n    setErrorMessage = _useState12[1];\n\n  // async function fetchData({ qr = \"\" }) {\n  //   try {\n  //     setProcessing(true);\n  //     const result = await axios.get(\n  //       `https://ucs-goma-backend.herokuapp.com/payement/scan?matricule=${qr}&forThisYear=1`\n  //     );\n  //     console.log(\"scanned code\", qr);\n  //     const { message, payement } = result.data;\n  //     console.log(payement);\n  //     if (!message) {\n  //       setCode({\n  //         text: payement.matricule,\n  //         identite: `${payement.nom} ${payement.postnom} ${payement.prenom}`,\n  //         promotion: payement.auditoire,\n  //         annee: payement.annee,\n  //         frais: Number.parseFloat(payement.totalPayer),\n  //         total: Number.parseFloat(payement.totalAPayer),\n  //         recouvrement: \"Premiere tranche\",\n  //         maxEncours: 800\n  //       });\n  //       // setPrecScan(null);\n  //       setDiaglog(true);\n  //     } else {\n  //       setCode(null);\n  //       setPrecScan(null);\n  //       setErrorMessage(message);\n  //       setDiaglog(true);\n  //     }\n  //   } catch (error) {\n  //     console.log(error);\n  //   }\n  // }\n\n  var handleScan = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(scanData) {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"loaded data data\", scanData);\n            if (!(scanData && scanData !== \"\" && !showDialog && !processing)) {\n              _context.next = 5;\n              break;\n            }\n            console.log(\"loaded >>>\", scanData);\n            // setPrecScan(scanData);\n            _context.next = 5;\n            return fetchData({\n              qr: scanData\n            });\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function handleScan(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleError = function handleError(err) {\n    console.error(err);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"scan\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Last Scan:\", precScan, selected]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: function onChange(e) {\n        return setSelected(e.target.value);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"environment\",\n        children: \"Back Camera\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"user\",\n        children: \"Front Camera\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(QrReader, {\n      facingMode: selected,\n      delay: 500,\n      onError: handleError,\n      onScan: handleScan\n      // chooseDeviceId={()=>selected}\n      ,\n      style: {\n        width: \"200px\",\n        heigth: \"100px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, _this);\n};\n_s(App, \"MJ6G7b1aouukFdduA73GZca9R2U=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","QrReader","axios","useEffect","App","code","setCode","showDialog","setDiaglog","processing","setProcessing","precScan","setPrecScan","selected","setSelected","errorMessage","setErrorMessage","handleScan","scanData","console","log","fetchData","qr","handleError","err","error","e","target","value","width","heigth"],"sources":["C:/Users/HP/Documents/GitHub/Qr-Code-Reader/src/App.js"],"sourcesContent":["import \"./styles.css\";\r\nimport { useState } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nimport axios from \"axios\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst App = () => {\r\n  const [code, setCode] = useState(null);\r\n  const [showDialog, setDiaglog] = useState(false);\r\n  const [processing, setProcessing] = useState(false);\r\n  const [precScan, setPrecScan] = useState(\"\");\r\n  const [selected, setSelected] = useState(\"environment\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  // async function fetchData({ qr = \"\" }) {\r\n  //   try {\r\n  //     setProcessing(true);\r\n  //     const result = await axios.get(\r\n  //       `https://ucs-goma-backend.herokuapp.com/payement/scan?matricule=${qr}&forThisYear=1`\r\n  //     );\r\n  //     console.log(\"scanned code\", qr);\r\n  //     const { message, payement } = result.data;\r\n  //     console.log(payement);\r\n  //     if (!message) {\r\n  //       setCode({\r\n  //         text: payement.matricule,\r\n  //         identite: `${payement.nom} ${payement.postnom} ${payement.prenom}`,\r\n  //         promotion: payement.auditoire,\r\n  //         annee: payement.annee,\r\n  //         frais: Number.parseFloat(payement.totalPayer),\r\n  //         total: Number.parseFloat(payement.totalAPayer),\r\n  //         recouvrement: \"Premiere tranche\",\r\n  //         maxEncours: 800\r\n  //       });\r\n  //       // setPrecScan(null);\r\n  //       setDiaglog(true);\r\n  //     } else {\r\n  //       setCode(null);\r\n  //       setPrecScan(null);\r\n  //       setErrorMessage(message);\r\n  //       setDiaglog(true);\r\n  //     }\r\n  //   } catch (error) {\r\n  //     console.log(error);\r\n  //   }\r\n  // }\r\n\r\n  const handleScan = async (scanData) => {\r\n    console.log(`loaded data data`, scanData);\r\n    if (scanData && scanData !== \"\" && !showDialog && !processing) {\r\n      console.log(`loaded >>>`, scanData);\r\n      // setPrecScan(scanData);\r\n      await fetchData({ qr: scanData });\r\n    }\r\n  };\r\n  const handleError = (err) => {\r\n    console.error(err);\r\n  };\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>scan</h1>\r\n      <h2>\r\n        Last Scan:{precScan}\r\n        {selected}\r\n      </h2>\r\n      <select onChange={(e) => setSelected(e.target.value)}>\r\n        <option value={\"environment\"}>Back Camera</option>\r\n        <option value={\"user\"}>Front Camera</option>\r\n      </select>\r\n      {/* {showDialog && (\r\n        <div className=\"dialog\">\r\n          <div className=\"dialog-content\">\r\n            <div className=\"close\">\r\n              <button\r\n                onClick={() => {\r\n                  setCode(null);\r\n                  setErrorMessage(null);\r\n                  setDiaglog(false);\r\n                  setProcessing(false);\r\n                }}\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M6 18L18 6M6 6l12 12\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            {errorMessage && (\r\n              <div className=\"errorMessage\">\r\n                <h2>{errorMessage}</h2>\r\n              </div>\r\n            )}\r\n            {code && (\r\n              <div className=\"description\">\r\n                <h4 className=\"title\">Scan Result</h4>\r\n                <div className=\"detail detail-first-child\">\r\n                  <h6 className=\"detail-header\">Matricule :</h6>\r\n                  <h6 className=\"detail-content green\">{code.text}</h6>\r\n                </div>\r\n                <div className=\"detail\">\r\n                  <h6 className=\"detail-header\">Identité :</h6>\r\n                  <h6 className=\"detail-content\">{code.identite}</h6>\r\n                </div>\r\n                <div className=\"detail\">\r\n                  <h6 className=\"detail-header\">Pomotion :</h6>\r\n                  <h6 className=\"detail-content\">{code.promotion}</h6>\r\n                </div>\r\n                <div className=\"detail\">\r\n                  <h6 className=\"detail-header\">Année Academique :</h6>\r\n                  <h6 className=\"detail-content\">{code.annee}</h6>\r\n                </div>\r\n                <div className=\"detail\">\r\n                  <h6 className=\"detail-header\">Total payé :</h6>\r\n                  <h6 className=\"detail-content red\">\r\n                    {code.frais} (USD,dollars americains)\r\n                  </h6>\r\n                </div>\r\n                <div className=\"detail\">\r\n                  <h6 className=\"detail-header\">Total prévu :</h6>\r\n                  <h6 className=\"detail-content red\">\r\n                    {code.total} (USD,dollars americains)\r\n                  </h6>\r\n                </div>\r\n                <div className=\"detail\">\r\n                  <h6 className=\"detail-header\">Reste à payer :</h6>\r\n                  <h6 className=\"detail-content red\">\r\n                    {code.total - code.frais} (USD,dollars americains)\r\n                  </h6>\r\n                </div>\r\n                <div className=\"detail\">\r\n                  <h6 className=\"detail-header\">Votre Situation :</h6>\r\n                  <h6\r\n                    className={\r\n                      code.total <= code.frais\r\n                        ? `detail-content green`\r\n                        : \"detail-content red small\"\r\n                    }\r\n                  >\r\n                    {code.total <= code.frais\r\n                      ? \"Eligible\"\r\n                      : \"Vous etes en retard de payement\"}\r\n                  </h6>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )} */}\r\n      {/* {code && <h2>{code.text}</h2>} */}\r\n      \r\n        <QrReader\r\n          facingMode={selected}\r\n          delay={500}\r\n          onError={handleError}\r\n          onScan={handleScan}\r\n          // chooseDeviceId={()=>selected}\r\n          style={{ width: \"200px\", heigth: \"100px\" }}\r\n        />\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":";;;;;;AAAA,OAAO,cAAc;AACrB,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,OAAO;AAAC;AAElC,IAAMC,GAAG,GAAG,SAANA,GAAG,GAAS;EAAA;EAChB,gBAAwBJ,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA/BK,IAAI;IAAEC,OAAO;EACpB,iBAAiCN,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAzCO,UAAU;IAAEC,UAAU;EAC7B,iBAAoCR,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA5CS,UAAU;IAAEC,aAAa;EAChC,iBAAgCV,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCW,QAAQ;IAAEC,WAAW;EAC5B,iBAAgCZ,QAAQ,CAAC,aAAa,CAAC;IAAA;IAAhDa,QAAQ;IAAEC,WAAW;EAC5B,kBAAwCd,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA/Ce,YAAY;IAAEC,eAAe;;EAEpC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAMC,UAAU;IAAA,sEAAG,iBAAOC,QAAQ;MAAA;QAAA;UAAA;YAChCC,OAAO,CAACC,GAAG,qBAAqBF,QAAQ,CAAC;YAAC,MACtCA,QAAQ,IAAIA,QAAQ,KAAK,EAAE,IAAI,CAACX,UAAU,IAAI,CAACE,UAAU;cAAA;cAAA;YAAA;YAC3DU,OAAO,CAACC,GAAG,eAAeF,QAAQ,CAAC;YACnC;YAAA;YAAA,OACMG,SAAS,CAAC;cAAEC,EAAE,EAAEJ;YAAS,CAAC,CAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA,CAEpC;IAAA,gBAPKD,UAAU;MAAA;IAAA;EAAA,GAOf;EACD,IAAMM,WAAW,GAAG,SAAdA,WAAW,CAAIC,GAAG,EAAK;IAC3BL,OAAO,CAACM,KAAK,CAACD,GAAG,CAAC;EACpB,CAAC;EACD,oBACE;IAAK,SAAS,EAAC,KAAK;IAAA,wBAClB;MAAA,UAAI;IAAI;MAAA;MAAA;MAAA;IAAA,SAAK,eACb;MAAA,WAAI,YACQ,EAACb,QAAQ,EAClBE,QAAQ;IAAA;MAAA;MAAA;MAAA;IAAA,SACN,eACL;MAAQ,QAAQ,EAAE,kBAACa,CAAC;QAAA,OAAKZ,WAAW,CAACY,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;MAAA,CAAC;MAAA,wBACnD;QAAQ,KAAK,EAAE,aAAc;QAAA,UAAC;MAAW;QAAA;QAAA;QAAA;MAAA,SAAS,eAClD;QAAQ,KAAK,EAAE,MAAO;QAAA,UAAC;MAAY;QAAA;QAAA;QAAA;MAAA,SAAS;IAAA;MAAA;MAAA;MAAA;IAAA,SACrC,eA2FP,QAAC,QAAQ;MACP,UAAU,EAAEf,QAAS;MACrB,KAAK,EAAE,GAAI;MACX,OAAO,EAAEU,WAAY;MACrB,MAAM,EAAEN;MACR;MAAA;MACA,KAAK,EAAE;QAAEY,KAAK,EAAE,OAAO;QAAEC,MAAM,EAAE;MAAQ;IAAE;MAAA;MAAA;MAAA;IAAA,SAC3C;EAAA;IAAA;IAAA;IAAA;EAAA,SAEA;AAEV,CAAC;AAAC,GApKI1B,GAAG;AAAA,KAAHA,GAAG;AAsKT,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module"}